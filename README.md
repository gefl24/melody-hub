# ğŸµ MelodyHub

åŸºäº lx-music-desktop æ ¸å¿ƒé€»è¾‘çš„ Web ç‰ˆæœ¬éŸ³ä¹æœåŠ¡ï¼Œæ”¯æŒå¤šå¹³å°éŸ³ä¹æœç´¢ã€ä¸‹è½½å’Œç®¡ç†ï¼Œæä¾› Docker ä¸€é”®éƒ¨ç½²æ–¹æ¡ˆã€‚

## âœ¨ ç‰¹æ€§

- ğŸµ **å¤šéŸ³æºæ”¯æŒ**: å®Œå…¨å…¼å®¹ lx-music-desktop çš„è‡ªå®šä¹‰æºï¼Œæ”¯æŒç½‘æ˜“äº‘ã€QQéŸ³ä¹ã€é…·æˆ‘ã€é…·ç‹—ç­‰å¤šä¸ªå¹³å°
- ğŸŒ **Web è®¿é—®**: æ— éœ€å®‰è£…å®¢æˆ·ç«¯ï¼Œæµè§ˆå™¨å³å¯ä½¿ç”¨ï¼Œæ”¯æŒå¤šè®¾å¤‡è®¿é—®
- ğŸ“¥ **æœåŠ¡å™¨ç«¯ä¸‹è½½**: æ”¯æŒæ–­ç‚¹ç»­ä¼ ã€é˜Ÿåˆ—ç®¡ç†ã€å¤šä»»åŠ¡å¹¶è¡Œä¸‹è½½
- ğŸ”„ **å®æ—¶æ¨é€**: WebSocket å®æ—¶æ¨é€ä¸‹è½½è¿›åº¦å’ŒçŠ¶æ€
- ğŸ›¡ï¸ **é˜²ç›—é“¾ä»£ç†**: è‡ªåŠ¨å¤„ç†éŸ³ä¹å¹³å°çš„é˜²ç›—é“¾ï¼Œç¡®ä¿éŸ³ä¹å¯ä»¥æ­£å¸¸æ’­æ”¾
- ğŸ’¾ **æ•°æ®æŒä¹…åŒ–**: SQLite æ•°æ®åº“å­˜å‚¨ï¼Œç¡®ä¿æ•°æ®å®‰å…¨
- ğŸ³ **å®¹å™¨åŒ–éƒ¨ç½²**: Docker ä¸€é”®éƒ¨ç½²ï¼Œç®€åŒ–å®‰è£…å’Œç»´æŠ¤
- ğŸ¨ **ç°ä»£åŒ– UI**: Vue 3 + Element Plus æ„å»ºï¼Œç¾è§‚æ˜“ç”¨
- ğŸ¯ **æ­Œæ›²ç®¡ç†**: å†…ç½®æ­Œæ›²ç®¡ç†å™¨ï¼Œæ”¯æŒå…ƒæ•°æ®ç¼–è¾‘ã€æ‰¹é‡æ“ä½œ
- ğŸ” **æ™ºèƒ½æœç´¢**: å¤šå¹³å°èšåˆæœç´¢ï¼Œå¿«é€Ÿæ‰¾åˆ°ä½ æƒ³è¦çš„éŸ³ä¹

## ğŸ“¸ é¢„è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸµ MelodyHub                                          â”‚
â”‚  â”œâ”€ ğŸ” æœç´¢éŸ³ä¹                                          â”‚
â”‚  â”œâ”€ ğŸ“¥ ä¸‹è½½ç®¡ç†                                          â”‚
â”‚  â””â”€ ğŸ¯ æ­Œæ›²ç®¡ç†                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  [æœç´¢æ¡†: è¯·è¾“å…¥æ­Œæ›²åã€æ­Œæ‰‹ã€ä¸“è¾‘]          [æœç´¢]      â”‚
â”‚                                                         â”‚
â”‚  æœç´¢ç»“æœ:                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ­Œå          æ­Œæ‰‹        ä¸“è¾‘        [æ’­æ”¾][ä¸‹è½½] â”‚   â”‚
â”‚  â”‚ å‘¨æ°ä¼¦-æ™´å¤©    å‘¨æ°ä¼¦      å¶æƒ ç¾      [â–¶] [â¬‡]    â”‚   â”‚
â”‚  â”‚ å‘¨æ°ä¼¦-ä¸ƒé‡Œé¦™  å‘¨æ°ä¼¦      ä¸ƒé‡Œé¦™      [â–¶] [â¬‡]    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â™« æ­£åœ¨æ’­æ”¾: æ™´å¤© - å‘¨æ°ä¼¦      [â—€] [â–¶] [â–¶â–¶]    ğŸ”Š 80%  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€: Docker éƒ¨ç½² (æ¨è)

version: '3.8'

services:
  melodyhub:
    image: geelonn/melodyhub:latest
    container_name: melodyhub
    restart: unless-stopped
    ports:
      - "3000:3000"
    volumes:
      - melodyhub-data:/app/data
      - melodyhub-files:/app/music
    environment:
      - NODE_ENV=production
      - PORT=3000
      - DATA_DIR=/app/data
      - MUSIC_DIR=/app/music
      - JWT_SECRET=your-secure-secret-key
      - TZ=Asia/Shanghai

volumes:
  melodyhub-data:
  melodyhub-files:


### æ–¹å¼äºŒ: æœ¬åœ°å¼€å‘

#### åç«¯

```bash
cd server

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨æœåŠ¡
npm start

# æˆ–å¼€å‘æ¨¡å¼
npm run dev
```

#### å‰ç«¯

```bash
cd client

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
```

## ğŸ“¦ éƒ¨ç½²é€‰é¡¹

### Docker Compose é…ç½®

é¡¹ç›®æä¾›äº†å¤šç§ Docker Compose é…ç½®æ–‡ä»¶ï¼Œé€‚ç”¨äºä¸åŒåœºæ™¯ï¼š

- **docker-compose.yml**: ç”Ÿäº§ç¯å¢ƒé…ç½®
- **docker-compose.dev.yml**: å¼€å‘ç¯å¢ƒé…ç½®ï¼ˆæ”¯æŒçƒ­é‡è½½ï¼‰
- **docker-compose.local.yml**: æœ¬åœ°å¿«é€Ÿéƒ¨ç½²é…ç½®ï¼ˆä½¿ç”¨é¢„æ„å»ºé•œåƒï¼‰

### ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆæˆ–ä¿®æ”¹ `docker-compose.yml`ï¼‰ï¼š

```env
# æœåŠ¡å™¨ç«¯å£
PORT=3000

# æ•°æ®ç›®å½•
DATA_DIR=/app/data

# éŸ³ä¹å­˜å‚¨ç›®å½•
MUSIC_DIR=/app/music

# Node ç¯å¢ƒ
NODE_ENV=production

# å®‰å…¨é…ç½® (ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹!)
JWT_SECRET=your-secure-secret-key

# ä¸‹è½½é…ç½®
MAX_CONCURRENT_DOWNLOADS=3
DOWNLOAD_RETRY_LIMIT=3

# å¯é€‰: HTTP ä»£ç†
# HTTP_PROXY=http://proxy.example.com:8080
# HTTPS_PROXY=http://proxy.example.com:8080

# æ—¶åŒºè®¾ç½®
TZ=Asia/Shanghai
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### 1. ä¸Šä¼ è‡ªå®šä¹‰æº

è®¿é—® `http://localhost:3000` åï¼Œè¿›å…¥"ç³»ç»Ÿè®¾ç½®"é¡µé¢ï¼š

1. ç‚¹å‡»"éŸ³æºç®¡ç†"
2. ç‚¹å‡»"ä¸Šä¼ éŸ³æº"
3. é€‰æ‹©è‡ªå®šä¹‰æº JavaScript æ–‡ä»¶
4. ä¸Šä¼ æˆåŠŸåå³å¯ä½¿ç”¨

### 2. æœç´¢éŸ³ä¹

1. åœ¨æœç´¢æ¡†ä¸­è¾“å…¥æ­Œæ›²åã€æ­Œæ‰‹æˆ–ä¸“è¾‘
2. é€‰æ‹©éŸ³æºï¼ˆå¯é€‰ï¼‰
3. ç‚¹å‡»æœç´¢æŒ‰é’®
4. ç‚¹å‡»"æ’­æ”¾"æŒ‰é’®åœ¨çº¿æ’­æ”¾
5. ç‚¹å‡»"ä¸‹è½½"æŒ‰é’®æ·»åŠ åˆ°ä¸‹è½½é˜Ÿåˆ—

### 3. ç®¡ç†ä¸‹è½½

è¿›å…¥"ä¸‹è½½ç®¡ç†"é¡µé¢ï¼š

- æŸ¥çœ‹æ‰€æœ‰ä¸‹è½½ä»»åŠ¡
- å®æ—¶æŸ¥çœ‹ä¸‹è½½è¿›åº¦
- æš‚åœ/æ¢å¤/åˆ é™¤ä»»åŠ¡
- ç­›é€‰ä¸åŒçŠ¶æ€çš„ä»»åŠ¡

### 4. æ­Œæ›²ç®¡ç†

è¿›å…¥"æ­Œæ›²ç®¡ç†"é¡µé¢ï¼š

- æŸ¥çœ‹æœ¬åœ°éŸ³ä¹åº“
- ç¼–è¾‘æ­Œæ›²å…ƒæ•°æ®ï¼ˆæ ‡é¢˜ã€è‰ºæœ¯å®¶ã€ä¸“è¾‘ç­‰ï¼‰
- æ‰¹é‡æ“ä½œï¼ˆé‡å‘½åã€åˆ é™¤ç­‰ï¼‰
- æœç´¢å’Œç­›é€‰æ­Œæ›²

## ğŸ“ ç›®å½•ç»“æ„

```
melodyhub/
â”œâ”€â”€ server/                    # åç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ core/             # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ SourceEngine.js     # æºå¼•æ“ï¼Œå¤„ç†è‡ªå®šä¹‰æº
â”‚   â”‚   â”‚   â”œâ”€â”€ DownloadManager.js   # ä¸‹è½½ç®¡ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ DatabaseManager.js   # æ•°æ®åº“ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ SongManager.js       # æ­Œæ›²ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ TaskService.js       # ä»»åŠ¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ routes/           # API è·¯ç”±
â”‚   â”‚   â””â”€â”€ app.js           # Express åº”ç”¨
â”‚   â”œâ”€â”€ sources/             # è‡ªå®šä¹‰æº
â”‚   â”œâ”€â”€ index.js             # å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ client/                   # å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ views/           # é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchView.vue       # æœç´¢é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ DownloadView.vue     # ä¸‹è½½ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ SongManagerView.vue  # æ­Œæ›²ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ SettingsView.vue     # ç³»ç»Ÿè®¾ç½®
â”‚   â”‚   â”œâ”€â”€ components/      # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ stores/          # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ api/             # API å°è£…
â”‚   â”‚   â”œâ”€â”€ router/          # è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ assets/          # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ App.vue
â”‚   â”‚   â””â”€â”€ main.js
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ vite.config.js
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ Dockerfile               # Docker æ„å»ºæ–‡ä»¶
â”œâ”€â”€ docker-compose.yml       # Docker Compose é…ç½®
â””â”€â”€ README.md
```

## ğŸ”Œ API æ–‡æ¡£

### ä¸»è¦ç«¯ç‚¹

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| POST | /api/music/search | æœç´¢éŸ³ä¹ |
| POST | /api/music/url | è·å–æ’­æ”¾é“¾æ¥ |
| POST | /api/music/lyric | è·å–æ­Œè¯ |
| POST | /api/download/add | æ·»åŠ ä¸‹è½½ä»»åŠ¡ |
| GET | /api/download/list | è·å–ä¸‹è½½åˆ—è¡¨ |
| GET | /api/download/status/:id | è·å–ä»»åŠ¡çŠ¶æ€ |
| POST | /api/download/pause/:id | æš‚åœä»»åŠ¡ |
| POST | /api/download/resume/:id | æ¢å¤ä»»åŠ¡ |
| POST | /api/download/delete/:id | åˆ é™¤ä»»åŠ¡ |
| GET | /api/source/list | è·å–éŸ³æºåˆ—è¡¨ |
| POST | /api/source/upload | ä¸Šä¼ éŸ³æº |
| POST | /api/source/delete/:id | åˆ é™¤éŸ³æº |
| GET | /api/song-manager/songs | è·å–æ­Œæ›²åˆ—è¡¨ |
| POST | /api/song-manager/update | æ›´æ–°æ­Œæ›²å…ƒæ•°æ® |
| GET | /api/proxy/stream | ä»£ç†éŸ³é¢‘æµ |
| GET | /health | å¥åº·æ£€æŸ¥ |

## ğŸ› ï¸ å¼€å‘è‡ªå®šä¹‰æº

### åŸºæœ¬ç»“æ„

```javascript
/**
 * @name éŸ³æºåç§°
 * @version 1.0.0
 * @author ä½œè€…
 * @description æè¿°
 */

// æœç´¢æ–¹æ³• (å¿…éœ€)
globalThis.search = async ({ keyword, page, limit }) => {
  return [
    {
      id: 'æ­Œæ›²ID',
      name: 'æ­Œæ›²å',
      singer: 'æ­Œæ‰‹',
      album: 'ä¸“è¾‘',
      duration: 240
    }
  ]
}

// è·å–æ’­æ”¾é“¾æ¥ (å¿…éœ€)
globalThis.getUrl = async ({ songInfo, quality }) => {
  return 'https://example.com/song.mp3'
}

// è·å–æ­Œè¯ (å¯é€‰)
globalThis.getLyric = async ({ songInfo }) => {
  return '[00:00.00]æ­Œè¯å†…å®¹'
}
```

### å¯ç”¨ API

- `lx.request(url, options, callback)` - HTTP è¯·æ±‚
- `lx.utils.crypto.md5(data)` - MD5 åŠ å¯†
- `lx.utils.crypto.aesEncrypt()` - AES åŠ å¯†
- `lx.utils.buffer.from()` - Buffer æ“ä½œ
- `lx.utils.zlib.gzip()` - Gzip å‹ç¼©

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜: å®¹å™¨å¯åŠ¨å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# é‡æ–°æ„å»º
docker-compose build --no-cache
docker-compose up -d
```

### é—®é¢˜: éŸ³é¢‘æ— æ³•æ’­æ”¾

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥éŸ³æºæ˜¯å¦è¿”å›æœ‰æ•ˆé“¾æ¥
2. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
3. ç¡®è®¤æœåŠ¡å™¨ç½‘ç»œæ­£å¸¸
4. æ£€æŸ¥é˜²ç›—é“¾è®¾ç½®

### é—®é¢˜: ä¸‹è½½å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥éŸ³ä¹ç›®å½•æƒé™
2. æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—
3. ç¡®è®¤ç£ç›˜ç©ºé—´å……è¶³
4. æ£€æŸ¥ç½‘ç»œè¿æ¥

## ğŸ“ å¼€å‘è®¡åˆ’

- [x] åç«¯æ ¸å¿ƒæ¨¡å—
- [x] å‰ç«¯ Vue 3 ç•Œé¢
- [x] Docker éƒ¨ç½²
- [ ] ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- [ ] æ’­æ”¾åˆ—è¡¨ç®¡ç†
- [ ] ç§»åŠ¨ç«¯é€‚é…
- [ ] å¤šç”¨æˆ·æ”¯æŒ
- [ ] éŸ³ä¹æ¨èåŠŸèƒ½

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### è´¡çŒ®æµç¨‹

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºä½ çš„åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤ä½ çš„æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

Apache License 2.0

## ğŸ™ è‡´è°¢

æœ¬é¡¹ç›®åŸºäº [lx-music-desktop](https://github.com/lyswhut/lx-music-desktop) çš„æ ¸å¿ƒé€»è¾‘å¼€å‘ï¼Œæ„Ÿè°¢åŸé¡¹ç›®çš„è´¡çŒ®è€…ä»¬ã€‚

---

**é¡¹ç›®çŠ¶æ€**: âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæˆ | ğŸš€ å¯ç”¨äºç”Ÿäº§

**æœ€åæ›´æ–°**: 2026-02-03
